<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Students - Mentor Allocation System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-gray-100">
    <header class="bg-green-600 text-white p-6 text-center text-2xl font-bold">
        Mentor Allocation System
    </header>

    <nav class="bg-gray-800 text-white p-4 text-center">
        <a href="admin.html" class="mx-4 hover:underline">Manage Mentors</a>
        <a href="manage-mentors.html" class="mx-4 hover:underline">Project Allocation</a>
        <a href="manage-students.html" class="mx-4 hover:underline font-semibold">Manage Students</a>
        <a href="logout.html" class="mx-4 hover:underline text-red-400">Logout</a>
    </nav>

    <main class="max-w-6xl mx-auto mt-8 p-6 bg-white rounded shadow">
        <h2 class="text-xl font-bold mb-6">Manage Students</h2>

        <!-- Search and Filter Section -->
        <div class="flex justify-between mb-6">
            <div class="w-1/2">
                <input type="text" id="searchInput" placeholder="Search students..." class="w-full p-2 border rounded">
            </div>
            <div class="flex space-x-2">
                <select id="batchFilter" class="p-2 border rounded">
                    <option value="">All Batches</option>
                    <option>2023</option>
                    <option>2024</option>
                    <option>2025</option>
                </select>
                <select id="mentorFilter" class="p-2 border rounded">
                    <option value="">All Mentors</option>
                    <option>Dr. Roohi Sille (AI)</option>
                    <option>Achala Shakya (CCVT)</option>
                    <option>Mohammad Ahsan (Big Data)</option>
                    <option>Sonal Talreja (CSF)</option>
                    <option>Kotha Venugopalachary (AI)</option>
                    <option>Pranshu Srivastava (Big Data)</option>
                    <option>Debanjan Ghosh (CSF)</option>
                    <option>Dr. Avita Katal (CCVT)</option>
                    <option>Rohitesh Kumar (AI)</option>
                    <option>Suvojit Dhara (AI)</option>
                    <option>Aishik Biswas (CCVT)</option>
                    <option>Sandeep Chand Kumain (CSF)</option>
                    <option>Pragya Katyayan (CCVT)</option>
                    <option>Upasana (Big Data)</option>
                    <option>Kaushlendra Kumar Sinha (CCVT)</option>
                    <option>Rakesh Ranjan (CSF)</option>
                </select>
            </div>
        </div>

        <!-- Students Table -->
        <div class="overflow-x-auto">
            <table class="min-w-full border">
                <thead>
                    <tr class="bg-gray-100">
                        <th class="border p-2 text-left">Student Name</th>
                        <th class="border p-2 text-left">SAP ID</th>
                        <th class="border p-2 text-left">Batch</th>
                        <th class="border p-2 text-left">Project</th>
                        <th class="border p-2 text-left">Assigned Mentor</th>
                        <th class="border p-2 text-left">Actions</th>
                    </tr>
                </thead>
                <tbody id="studentsTableBody" class="divide-y">
                    <!-- Students will be populated here by JavaScript -->
                </tbody>
            </table>
        </div>

        <!-- Add/Edit Student Section -->
        <div class="mt-8 p-4 border rounded bg-gray-50" id="studentFormContainer">
            <h3 class="text-lg font-semibold mb-4" id="formTitle">Add New Student</h3>
            <form id="studentForm">
                <input type="hidden" id="studentId">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-gray-700 mb-1">Full Name</label>
                        <input type="text" id="studentName" class="w-full p-2 border rounded" required>
                    </div>
                    <div>
                        <label class="block text-gray-700 mb-1">SAP ID</label>
                        <input type="text" id="sapId" class="w-full p-2 border rounded" required>
                    </div>
                    <div>
                        <label class="block text-gray-700 mb-1">Batch</label>
                        <select id="batch" class="w-full p-2 border rounded" required>
                            <option value="">Select batch</option>
                            <option>2023</option>
                            <option>2024</option>
                            <option>2025</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-gray-700 mb-1">Email</label>
                        <input type="email" id="studentEmail" class="w-full p-2 border rounded" required>
                    </div>
                    <div>
                        <label class="block text-gray-700 mb-1">Project Title</label>
                        <input type="text" id="projectTitle" class="w-full p-2 border rounded">
                    </div>
                    <div>
                        <label class="block text-gray-700 mb-1">Assigned Mentor</label>
                        <select id="assignedMentor" class="w-full p-2 border rounded">
                            <option value="">Select mentor</option>
                            <option>Dr. Roohi Sille (Artificial Intelligence)</option>
                            <option>Achala Shakya (CCVT)</option>
                            <option>Mohammad Ahsan (Big Data)</option>
                            <option>Sonal Talreja (CSF)</option>
                            <option>Kotha Venugopalachary (Artificial Intelligence)</option>
                            <option>Pranshu Srivastava (Big Data)</option>
                            <option>Debanjan Ghosh (CSF)</option>
                            <option>Dr. Avita Katal (CCVT)</option>
                            <option>Rohitesh Kumar (Artificial Intelligence)</option>
                            <option>Suvojit Dhara (Artificial Intelligence)</option>
                            <option>Aishik Biswas (CCVT)</option>
                            <option>Sandeep Chand Kumain (CSF)</option>
                            <option>Pragya Katyayan (CCVT)</option>
                            <option>Upasana (Big Data)</option>
                            <option>Kaushlendra Kumar Sinha (CCVT)</option>
                            <option>Rakesh Ranjan (CSF)</option>
                        </select>
                    </div>
                </div>
                <div class="mt-4 flex justify-end space-x-2">
                    <button type="button" id="cancelBtn" class="bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400 hidden">
                        Cancel
                    </button>
                    <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
                        <i class="fas fa-save mr-2"></i> Save Student
                    </button>
                </div>
            </form>
        </div>
    </main>

    <footer class="bg-gray-800 text-white p-4 mt-8 text-center">
        <p>&copy; 2025 Mentor Allocation System</p>
    </footer>

    <script>
        // Sample student data
        let students = [
            {
                id: 1,
                name: "John Doe",
                sapId: "500123456",
                batch: "2024",
                email: "john.doe@example.com",
                project: "AI Chatbot Development",
                mentor: "Dr. Roohi Sille (Artificial Intelligence)"
            },
            {
                id: 2,
                name: "Jane Smith",
                sapId: "500123457",
                batch: "2023",
                email: "jane.smith@example.com",
                project: "Predictive Analytics",
                mentor: "Achala Shakya (CCVT)"
            },
            {
                id: 3,
                name: "Robert Johnson",
                sapId: "500123458",
                batch: "2025",
                email: "robert.j@example.com",
                project: "Data Visualization",
                mentor: "Mohammad Ahsan (Big Data)"
            }
        ];

        // DOM Elements
        const studentsTableBody = document.getElementById('studentsTableBody');
        const studentForm = document.getElementById('studentForm');
        const searchInput = document.getElementById('searchInput');
        const batchFilter = document.getElementById('batchFilter');
        const mentorFilter = document.getElementById('mentorFilter');
        const cancelBtn = document.getElementById('cancelBtn');
        const formTitle = document.getElementById('formTitle');

        // Initialize the page
        document.addEventListener('DOMContentLoaded', () => {
            renderStudentsTable();
            setupEventListeners();
        });

        // Render students table
        function renderStudentsTable(filteredStudents = null) {
            const data = filteredStudents || students;
            studentsTableBody.innerHTML = '';

            data.forEach(student => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                row.innerHTML = `
                    <td class="border p-2">${student.name}</td>
                    <td class="border p-2">${student.sapId}</td>
                    <td class="border p-2">${student.batch}</td>
                    <td class="border p-2">${student.project || '-'}</td>
                    <td class="border p-2">${student.mentor || 'Not assigned'}</td>
                    <td class="border p-2">
                        <button onclick="editStudent(${student.id})" class="text-blue-600 hover:text-blue-800 mr-2">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button onclick="deleteStudent(${student.id})" class="text-red-600 hover:text-red-800">
                            <i class="fas fa-trash-alt"></i> Remove
                        </button>
                    </td>
                `;
                studentsTableBody.appendChild(row);
            });
        }

        // Edit student function
        window.editStudent = function(id) {
            const student = students.find(s => s.id === id);
            if (student) {
                document.getElementById('studentId').value = student.id;
                document.getElementById('studentName').value = student.name;
                document.getElementById('sapId').value = student.sapId;
                document.getElementById('batch').value = student.batch;
                document.getElementById('studentEmail').value = student.email;
                document.getElementById('projectTitle').value = student.project || '';
                document.getElementById('assignedMentor').value = student.mentor || '';
                
                formTitle.textContent = 'Edit Student';
                cancelBtn.classList.remove('hidden');
                document.getElementById('studentFormContainer').scrollIntoView({ behavior: 'smooth' });
            }
        };

        // Delete student function
        window.deleteStudent = function(id) {
            if (confirm('Are you sure you want to delete this student?')) {
                students = students.filter(s => s.id !== id);
                renderStudentsTable();
                resetForm();
            }
        };

        // Form submission
        studentForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const id = document.getElementById('studentId').value;
            const studentData = {
                name: document.getElementById('studentName').value,
                sapId: document.getElementById('sapId').value,
                batch: document.getElementById('batch').value,
                email: document.getElementById('studentEmail').value,
                project: document.getElementById('projectTitle').value || null,
                mentor: document.getElementById('assignedMentor').value || null
            };

            if (id) {
                // Update existing student
                const index = students.findIndex(s => s.id === parseInt(id));
                if (index !== -1) {
                    students[index] = { ...students[index], ...studentData };
                }
            } else {
                // Add new student
                studentData.id = students.length > 0 ? Math.max(...students.map(s => s.id)) + 1 : 1;
                students.push(studentData);
            }

            renderStudentsTable();
            resetForm();
        });

        // Cancel edit
        cancelBtn.addEventListener('click', resetForm);

        // Reset form
        function resetForm() {
            studentForm.reset();
            document.getElementById('studentId').value = '';
            formTitle.textContent = 'Add New Student';
            cancelBtn.classList.add('hidden');
        }

        // Search and filter functionality
        function setupEventListeners() {
            searchInput.addEventListener('input', filterStudents);
            batchFilter.addEventListener('change', filterStudents);
            mentorFilter.addEventListener('change', filterStudents);
        }

        function filterStudents() {
            const searchTerm = searchInput.value.toLowerCase();
            const batch = batchFilter.value;
            const mentor = mentorFilter.value;
            
            const filtered = students.filter(student => {
                const matchesSearch = student.name.toLowerCase().includes(searchTerm) || 
                                    student.sapId.toLowerCase().includes(searchTerm) ||
                                    student.email.toLowerCase().includes(searchTerm);
                const matchesBatch = !batch || student.batch === batch;
                const matchesMentor = !mentor || student.mentor.includes(mentor);
                return matchesSearch && matchesBatch && matchesMentor;
            });
            
            renderStudentsTable(filtered);
        }
    </script>
</body>
</html>